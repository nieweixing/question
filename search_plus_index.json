{"./":{"url":"./","title":"简介","keywords":"","body":"简介 本书主要记录了个人运维过程中遇到的各种问题，希望这些笔记在大家学习的过程能帮到大家，相关笔记后续会逐步完善。 © vishon all right reserved，powered by GitbookUpdated at 2021-09-22 14:41:34 "},"tke/Pod-uses-components-to-mount-cfs-to-report-errors.html":{"url":"tke/Pod-uses-components-to-mount-cfs-to-report-errors.html","title":"1.pod采用组件挂载cfs报错","keywords":"","body":"pod采用组件挂载cfs报错 问题现象 pod通过cfs组件挂载cfs一直pending，pod起不来，查看事件报错MountVolume.MountDevice failed for volume \"xxxxxxx\" : kubernetes.io/csi: attacher.MountDevice failed to create newCsiDriverClient: driver name com.tencent.cloud.csi.cfs not found in the list of registered CSI drivers。 排查思路 根据事件日志报错是因为cfs组件agent异常导致，检查cfs组件的agent是正常运行。 查看事件发现有一条日志Starting pod sandbox eks-xxxxx，这个说明是调度到虚拟节点的，但是cfs组件的agent是csi-nodeplugin-cfsplugin(kube-system)，这个负载是DaemonSet类型，虚拟节点是无法运行DaemonSet，所以组件的agent无法在虚拟节点上运行。导致pod挂载cfs异常。 解决方案 将pod调度到正常节点上，不要调度到虚拟节点上，或者采用nfs的方式进行挂载。 © vishon all right reserved，powered by GitbookUpdated at 2021-10-04 17:29:34 "}}